{"ast":null,"code":"var _jsxFileName = \"/home/apoorva/coding/week_18/day_4/frontend/auth/src/components/MyBlog.js\";\nimport React from \"react\";\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport { connect } from \"react-redux\";\n\nclass MyBlog extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = () => {\n      let local = localStorage.getItem(\"token\"); // console.log(JSON.parse(local))\n\n      if (JSON.parse(local) != null) {\n        const token = {\n          headers: {\n            Authorization: \"Bearer \" + JSON.parse(local)\n          }\n        };\n        axios.post('http://127.0.0.1:5000/myblogs', {}, token).then(res => this.setState({\n          myBlogs: res.data\n        })).catch(error => console.log(error));\n      }\n    };\n\n    this.updateBlog = () => {};\n\n    this.deleteBlog = id => {\n      swal({\n        title: \"Are you sure?\",\n        text: \"You will not be able to recover this imaginary file!\",\n        type: \"warning\",\n        showCancelButton: true,\n        confirmButtonClass: \"btn-danger\",\n        confirmButtonText: \"Yes, delete it!\",\n        cancelButtonText: \"No, cancel plx!\",\n        closeOnConfirm: false,\n        closeOnCancel: false\n      }, function (isConfirm) {\n        if (isConfirm) {\n          let local = localStorage.getItem(\"token\"); // console.log(JSON.parse(local))\n\n          if (JSON.parse(local) != null) {\n            const token = {\n              headers: {\n                Authorization: \"Bearer \" + JSON.parse(local)\n              }\n            };\n            axios.post('http://127.0.0.1:5000/deleteblog', {\n              \"blog_id\": id\n            }, token).then(res => swal(`Deleted! ${res.data.message}`, \"success\")).catch(error => console.log(error));\n          }\n        } else {\n          swal(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\");\n        }\n      });\n    };\n\n    this.state = {\n      myBlogs: []\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, this.props.isloggedIn ? React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, this.state.myBlogs.map(ele => {\n      return React.createElement(\"div\", {\n        className: \"card m-5\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        className: \"card-title mt-3 ml-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, ele.blog.title), React.createElement(\"div\", {\n        className: \"card-body\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, \"Published On : \", ele.blog.publish_date), React.createElement(\"div\", {\n        className: \"d-flex\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: \"badge badge-secondary ml-3 mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, ele.category)), React.createElement(\"div\", {\n        className: \"card\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        className: \"card-text m-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, ele.blog.blog_body))), React.createElement(\"div\", {\n        className: \"ml-3 mb-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        className: \"btn btn-secondary\",\n        onClick: () => this.updateBlog(ele.blog.blog_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }, \"Update\"), React.createElement(\"button\", {\n        className: \"btn btn-secondary ml-2\",\n        onClick: () => this.deleteBlog(ele.blog.blog_id),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91\n        },\n        __self: this\n      }, \"Delete\")));\n    })) : React.createElement(\"div\", {\n      className: \"row justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Sign In/ Sign Up First\")));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  isloggedIn: state.isloggedIn\n});\n\nexport default connect(mapStateToProps, null)(MyBlog);","map":{"version":3,"sources":["/home/apoorva/coding/week_18/day_4/frontend/auth/src/components/MyBlog.js"],"names":["React","axios","swal","connect","MyBlog","Component","constructor","props","componentDidMount","local","localStorage","getItem","JSON","parse","token","headers","Authorization","post","then","res","setState","myBlogs","data","catch","error","console","log","updateBlog","deleteBlog","id","title","text","type","showCancelButton","confirmButtonClass","confirmButtonText","cancelButtonText","closeOnConfirm","closeOnCancel","isConfirm","message","state","render","isloggedIn","map","ele","blog","publish_date","category","blog_body","blog_id","mapStateToProps"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport axios from 'axios'\nimport swal from 'sweetalert'\nimport { connect } from \"react-redux\"\n\nclass MyBlog extends React.Component{\n    constructor(props){\n        super(props)\n        this.state={\n            myBlogs : []\n        }\n    }\n\n    componentDidMount = () =>{\n        let local = localStorage.getItem(\"token\")\n        // console.log(JSON.parse(local))\n        if(JSON.parse(local) != null){\n            const token = {\n                headers : {Authorization : \"Bearer \"+JSON.parse(local)}\n            }\n            axios.post('http://127.0.0.1:5000/myblogs',{},token).then\n            (res =>\n                this.setState({\n                    myBlogs : res.data\n                })\n            ).catch(error => console.log(error))\n        }\n\n    }\n\n    updateBlog = () =>{\n\n    }\n\n    deleteBlog = (id) =>{\n        swal({\n            title: \"Are you sure?\",\n            text: \"You will not be able to recover this imaginary file!\",\n            type: \"warning\",\n            showCancelButton: true,\n            confirmButtonClass: \"btn-danger\",\n            confirmButtonText: \"Yes, delete it!\",\n            cancelButtonText: \"No, cancel plx!\",\n            closeOnConfirm: false,\n            closeOnCancel: false\n          },\n          function(isConfirm) {\n            if (isConfirm) {\n                let local = localStorage.getItem(\"token\")\n                // console.log(JSON.parse(local))\n                if(JSON.parse(local) != null){\n                    const token = {\n                        headers : {Authorization : \"Bearer \"+JSON.parse(local)}\n                    }\n                    axios.post('http://127.0.0.1:5000/deleteblog',{\n                        \"blog_id\" : id\n                    },token).then\n                    (res =>\n                        swal(`Deleted! ${res.data.message}`, \"success\")\n                    ).catch(error => console.log(error))\n                }\n            \n            } else {\n              swal(\"Cancelled\", \"Your imaginary file is safe :)\", \"error\");\n            }\n          });\n    }\n\n\n    render()\n    {\n        return(\n            <div>\n                {this.props.isloggedIn ? (\n                    <div>\n                        {this.state.myBlogs.map(ele => {\n                            return(\n                                <div  className=\"card m-5\">\n                                    <h5 className=\"card-title mt-3 ml-3\">{ele.blog.title}</h5>\n                                    <div className=\"card-body\">\n                                        <p>Published On : {ele.blog.publish_date}</p>\n                                        <div className=\"d-flex\">\n                                            <span className=\"badge badge-secondary ml-3 mb-3\">{ele.category}</span>\n                                        </div>\n                                        <div className=\"card\">\n                                            <p className=\"card-text m-4\">{ele.blog.blog_body}</p>\n                                        </div>\n                                    </div>\n                                    <div className=\"ml-3 mb-1\">\n                                        <button className=\"btn btn-secondary\" onClick={() =>  this.updateBlog(ele.blog.blog_id)}>Update</button>\n                                        <button className=\"btn btn-secondary ml-2\" onClick={() =>  this.deleteBlog(ele.blog.blog_id)}>Delete</button>\n                                    </div>\n                                </div>\n                            )\n                        })}\n                    </div>\n                ):(\n                    <div className=\"row justify-content-center\">\n                        <h1 className=\"text-center\">Sign In/ Sign Up First</h1>\n                    </div>\n                )}\n            </div>\n        )\n    }\n}\n\nconst mapStateToProps = state => ({\n    isloggedIn : state.isloggedIn\n})\n\n\n\nexport default connect(mapStateToProps,null) (MyBlog)\n"]},"metadata":{},"sourceType":"module"}